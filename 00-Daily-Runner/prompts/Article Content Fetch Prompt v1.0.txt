# Article Content Fetch Prompt v1.0
**VERSION:** 1.0  
**DATE:** 2025-10-06  
**PURPOSE:** Fetch FULL article content for top-scored articles

---

## Context
Database: D:\PMO-Brain-2.0-Modular\02-discovery-engine\pmo_insights.db  
Generated by: fetch-prompt-builder.ps1

---

## Instructions

### Phase 1: Direct Fetch Attempt

For each URL provided (process in order):

1. **Try web_fetch directly** on the URL

2. **If successful:**
   - If article under 10,000 words: Store COMPLETE content in full_content field
   - If article exceeds 10,000 words: Extract comprehensive summary (800-1200 words) covering:
     - Main concepts and features
     - Benefits and use cases
     - Technical details
     - PMO relevance and applications
     - Examples and real-world context
     - Implementation considerations

3. **If fails:** Note error, proceed to Phase 2

---

### Phase 2: Search & Fetch Fallback

For URLs that failed direct fetch:

1. **Search:** "[article title]" [source domain]

2. **web_fetch** the URL from search results
   - Apply same content rules as Phase 1

3. **Still fails:** Mark as 'failed' with specific reason

---

### Phase 3: Database Updates

For each article processed, update with one of these:

#### SUCCESS
```sql
UPDATE daily_insights 
SET content_fetched = 1,
    fetch_status = 'success',
    fetch_date = CURRENT_TIMESTAMP,
    fetch_attempts = fetch_attempts + 1,
    full_content = '[extracted content]',
    content_length = [character_count],
    updated_at = CURRENT_TIMESTAMP
WHERE id = ?
```

#### FAILED
```sql
UPDATE daily_insights 
SET content_fetched = 0,
    fetch_status = 'failed',
    fetch_date = CURRENT_TIMESTAMP,
    fetch_attempts = fetch_attempts + 1,
    fetch_error = '[specific error reason]',
    updated_at = CURRENT_TIMESTAMP
WHERE id = ?
```

---

### Phase 4: Early Stop Logic

- Track successful fetches as you process
- STOP when you reach target (shown in context header)
- Don't process remaining articles if target met
- Target is typically 10 total successful fetches for the day

---

### Phase 5: Final Report

Generate summary:
```
DAILY PMO ARTICLE FETCH COMPLETE

Target: [X] new articles needed
Successfully Fetched: [Y]/[X]
Failed: [Z]
Total Success Today: [total]/10

Processed Articles:
[List each with ID, title, status, word count]

Failed Articles (if any):
[List with ID, title, reason]
```

---

## Error Handling

| Error Type | Action |
|------------|--------|
| Direct fetch fails | Try search & fetch |
| Search fails | Mark 'failed', reason: "URL not accessible" |
| Paywall detected | Mark 'partial', store available content |
| Rate limit hit | Mark remaining as 'pending' |
| Content too short | Mark 'failed', reason: "Insufficient content" |

---

## Quality Checks

Before storing content, verify:
- Content length > 200 words
- Content is actual article (not just navigation/ads)
- Content relates to article title
- No extraction errors in text

If quality check fails, try Phase 2 fallback.